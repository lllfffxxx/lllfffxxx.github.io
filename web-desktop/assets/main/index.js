System.register("chunks:///_virtual/AILib.ts",["cc"],(function(t){var m,n,e;return{setters:[function(t){m=t.cclegacy,n=t.Vec3,e=t.Quat}],execute:function(){t({sphereAABBDistance:i,sphereOBBDistance:function(t,m,r,x,s){return n.subtract(u,t,r),e.conjugate(c,x),n.transformQuat(a,u,c),i(a,m,s)}}),m._RF.push({},"e200arLWgRK2aEVd3mb65un","AILib",void 0);var a={x:0,y:0,z:0},r={x:0,y:0,z:0},u={x:0,y:0,z:0},c={x:0,y:0,z:0,w:1};function i(t,m,e){return r.x=Math.max(-e.x,Math.min(t.x,e.x)),r.y=Math.max(-e.y,Math.min(t.y,e.y)),r.z=Math.max(-e.z,Math.min(t.z,e.z)),n.subtract(r,r,t),n.dot(r,r)<=m*m}t("obbIntersect",(function(t,m,n,e,a,r){var u,c=m.x,i=m.y,x=m.z,s=n.m00,y=n.m01,o=n.m02,z=n.m03,h=n.m04,b=n.m05,f=n.m06,M=n.m07,p=n.m08,v=a.x,g=a.y,A=a.z,B=r.m00,I=r.m01,L=r.m02,d=r.m03,R=r.m04,_=r.m05,l=r.m06,D=r.m07,E=r.m08,F=s*B+y*I+o*L,N=s*d+y*R+o*_,O=s*l+y*D+o*E,Q=z*B+h*I+b*L,S=z*d+h*R+b*_,V=z*l+h*D+b*E,j=f*B+M*I+p*L,k=f*d+M*R+p*_,w=f*l+M*D+p*E,K=e.x-t.x,P=e.y-t.y,W=e.z-t.z,q=K*s+P*y+W*o,C=K*z+P*h+W*b,G=K*f+P*M+W*p,H=Number.EPSILON,J=(F>=0?F:-F)+H,T=(N>=0?N:-N)+H,U=(O>=0?O:-O)+H,X=(Q>=0?Q:-Q)+H,Y=(S>=0?S:-S)+H,Z=(V>=0?V:-V)+H,$=(j>=0?j:-j)+H,tt=(k>=0?k:-k)+H,mt=(w>=0?w:-w)+H;return!((q>=0?q:-q)>c+(v*J+g*T+A*U))&&(!((C>=0?C:-C)>i+(v*X+g*Y+A*Z))&&(!((G>=0?G:-G)>x+(v*$+g*tt+A*mt))&&(!(((u=q*F+C*Q+G*j)>=0?u:-u)>c*J+i*X+x*$+v)&&(!(((u=q*N+C*S+G*k)>=0?u:-u)>c*T+i*Y+x*tt+g)&&(!(((u=q*O+C*V+G*w)>=0?u:-u)>c*U+i*Z+x*mt+A)&&(!(((u=G*Q-C*j)>=0?u:-u)>i*$+x*X+(g*U+A*T))&&(!(((u=G*S-C*k)>=0?u:-u)>i*tt+x*Y+(v*U+A*J))&&(!(((u=G*V-C*w)>=0?u:-u)>i*mt+x*Z+(v*T+g*J))&&(!(((u=q*j-G*F)>=0?u:-u)>c*$+x*J+(g*Z+A*Y))&&(!(((u=q*k-G*N)>=0?u:-u)>c*tt+x*T+(v*Z+A*X))&&(!(((u=q*w-G*O)>=0?u:-u)>c*mt+x*U+(v*Y+g*X))&&(!(((u=C*F-q*Q)>=0?u:-u)>c*X+i*J+(g*mt+A*tt))&&(!(((u=C*N-q*S)>=0?u:-u)>c*Y+i*T+(v*mt+A*$))&&!(((u=C*O-q*V)>=0?u:-u)>c*Z+i*U+(v*tt+g*$)))))))))))))))}));m._RF.pop()}}}));

System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localStorageData.ts"],(function(o){var i,s,t,u,n,e,r,a,c,d;return{setters:[function(o){i=o.createClass},function(o){s=o.cclegacy,t=o._decorator,u=o.Node,n=o.director,e=o.AudioSource,r=o.AudioClip,a=o.resources,c=o.error},function(o){d=o.localStorageData}],execute:function(){var h,l;s._RF.push({},"3bc6dFhj21CYLfHIHmfM4Qc","audioManager",void 0);var p=t.ccclass;t.property,o("AudioManager",p("AudioManager")(((l=function(){function o(){this.musicVolume=.8,this.soundVolume=1,this.audios={},this.arrSound=[],this.dictWeaponSoundIndex={},this._persistRootNode=null,this._audioSources=[]}var s=o.prototype;return s.init=function(){this._persistRootNode||(this._persistRootNode=new u("audio"),n.getScene().addChild(this._persistRootNode),n.addPersistRootNode(this._persistRootNode),this.musicVolume=this.getAudioSetting(!0)?.8:0,this.soundVolume=this.getAudioSetting(!1)?1:0)},s._getAudioSource=function(o){for(var i,s=0;s<this._audioSources.length;++s){var t=this._audioSources[s];if(!t.playing){i=t;break}}return i||(i=this._persistRootNode.addComponent(e),this._audioSources.push(i)),i.node.off(e.EventType.ENDED),i.clip=o,i.currentTime=0,i},s.getAudioSetting=function(o){return d.soundOpen()},s.playMusic=function(o,i){var s=this,t="music/"+o;this.loadRes(t,r,(function(t,u){var n=s._getAudioSource(u),e={source:n,isMusic:!0};s.audios[o]=e,n.volume=s.musicVolume,n.loop=i,n.play()}))},s.playSound=function(o,i){var s=this;if(void 0===i&&(i=!1),this.soundVolume){this.loadRes("music/"+o,r,(function(t,u){var n=s._getAudioSource(u),r={source:n,isMusic:!1};s.arrSound.push(r),i&&(s.audios[o]=r),n.volume=s.soundVolume,n.loop=i,n.play(),n.node.on(e.EventType.ENDED,(function(){s.remove(s.arrSound,(function(o){return o.source===r.source}))}))}))}},s.stop=function(o){this.audios.hasOwnProperty(o)&&this.audios[o].source.stop()},s.stopAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.stop()}},s.getMusicVolume=function(){return this.musicVolume},s.setMusic=function(o){for(var i in this.musicVolume=o,this.audios){if(this.audios.hasOwnProperty(i)&&this.audios[i].isMusic)this.audios[i].source.volume=this.musicVolume}},s.pauseAll=function(){for(var o in console.log("pause all music!!!"),this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.pause()}},s.resumeAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.play()}},s.openMusic=function(){this.setMusic(.8)},s.closeMusic=function(){this.setMusic(0)},s.openSound=function(){this.setSound(1)},s.closeSound=function(){this.setSound(0)},s.setSound=function(o){for(var i in this.soundVolume=o,this.audios){if(this.audios.hasOwnProperty(i)&&!this.audios[i].isMusic)this.audios[i].source.volume=this.soundVolume}for(var s=0;s<this.arrSound.length;s++){this.arrSound[s].source.volume=this.soundVolume}},s.stopSingleSound=function(o){this.audios.hasOwnProperty(o)&&!this.audios[o].isMusic&&this.audios[o].source.stop()},s.playWeaponSound=function(o){this.dictWeaponSoundIndex[o]?this.dictWeaponSoundIndex[o]=1===this.dictWeaponSoundIndex[o]?2:1:this.dictWeaponSoundIndex[o]=1,console.log(">>>",o+"_"+this.dictWeaponSoundIndex[o]),this.playSound(o+"_"+this.dictWeaponSoundIndex[o])},s.loadRes=function(o,i,s){void 0===s&&(s=function(){}),a.load(o,(function(o,i){if(o)return c(o.message||o),void s(o,i);s&&s(null,i)}))},s._basePullAt=function(o,i){for(var s,t=o?i.length:0,u=t-1;t--;){var n=i[t];t!==u&&n===s||(s=n,Array.prototype.splice.call(o,n,1))}return o},s.remove=function(o,i){var s=[],t=[];return o.forEach((function(o,u){i(o)&&(s.push(o),t.push(u))})),this._basePullAt(o,t),s},i(o,null,[{key:"instance",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}())._instance=void 0,h=l))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/Body.ts",["cc","./Object.ts"],(function(t){var i,s,e,r,h;return{setters:[function(t){i=t.cclegacy,s=t.Quat,e=t.Vec3,r=t.Mat3},function(t){h=t.Dirty}],execute:function(){i._RF.push({},"35d5eaYM9dJwrqPskERJ5FA","Body",void 0);t("cBody",function(){function t(t){this.id=0,this.mask=0,this.group=0,this.shape=null,this.object=null,this.isDirty=7,this.frameID=-1,this.lower=0,this.upper=0,this.aabb=[0,0,0,0,0,0],this.isRemove=!1,this.isRetrieve=!0,this.isIdentity=!0,this.inCollider=!1,this.raidus=0,this.center=new e,this.rotMat3=new r,this.halfSize=new e,this.object=t}var i=t.prototype;return i.updateBound=function(t){void 0===t&&(t=h.NON);var i=this.object,e=t|i.isDirty;if(e>0){var r=this.shape;if(e&h.R){this.isIdentity=!1;var n=this.getRotation();this.rotMat3.fromQuat(n),n.equals(s.IDENTITY,1e-4)&&(this.isIdentity=!0),r.updateAABB(this.rotMat3,this.isIdentity)}i.isDirty=h.NON;var o=this.aabb,a=r.aabb,u=this.getScale(),c=this.getPosition(),y=u.x>=0?u.x:-u.x,l=u.y>=0?u.y:-u.y,d=u.z>=0?u.z:-u.z;return o[0]=a[0]*y+c.x,o[1]=a[1]*l+c.y,o[2]=a[2]*d+c.z,o[3]=a[3]*y+c.x,o[4]=a[4]*l+c.y,o[5]=a[5]*d+c.z,this.isDirty=7,!0}return!1},i.clear=function(){this.shape=null,this.frameID=-1,this.object.body=null,this.object=null,this.inCollider=!1,this.isRemove=!1},i.getScale=function(){return this.object.node.worldScale},i.getPosition=function(){return this.object.node.worldPosition},i.getRotation=function(){return this.object.node.worldRotation},i.getRotMat3=function(){return this.rotMat3},i.getCenter=function(){if(1&this.isDirty){this.isDirty&=-2;var t=this.aabb,i=this.center;i.x=.5*(t[0]+t[3]),i.y=.5*(t[1]+t[4]),i.z=.5*(t[2]+t[5])}return this.center},i.getRaidus=function(){if(2&this.isDirty){this.isDirty&=-3;var t=this.getScale(),i=t.x>=0?t.x:-t.x,s=t.y>=0?t.y:-t.y,e=t.z>=0?t.z:-t.z,r=this.shape.radius,h=Math.max(i,s,e);this.raidus=h*r}return this.raidus},i.getHalfSize=function(){if(4&this.isDirty){this.isDirty&=-5;var t=this.getScale(),i=t.x>=0?t.x:-t.x,s=t.y>=0?t.y:-t.y,e=t.z>=0?t.z:-t.z,r=this.halfSize,h=this.shape.halfSize;r.x=i*h.x,r.y=s*h.y,r.z=e*h.z}return this.halfSize},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/CameraCheck.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WalkOnRoad.ts","./Collider.ts"],(function(e){var n,t,o,s,r,l,i,a,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,s=e.KeyCode,r=e.Vec3,l=e.NodeSpace,i=e.Component},function(e){a=e.WalkOnRoad},function(e){c=e.cCollider}],execute:function(){var d;t._RF.push({},"1776f8+rlRLGrNHvYt8/Cgn","CameraCheck",void 0);var u=o.ccclass;o.property,e("CameraCheck",u("CameraCheck")(d=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return(n=e.call.apply(e,[this].concat(o))||this).n=2,n}n(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){c.inst.update(e)},o.onKeyDown=function(e){console.log("111"),e.keyCode==s.KEY_W?this.node.translate(new r(0,0,-this.n),l.WORLD):e.keyCode==s.KEY_S?this.node.translate(new r(0,0,this.n),l.WORLD):e.keyCode==s.KEY_A?this.node.translate(new r(-this.n,0,0),l.WORLD):e.keyCode==s.KEY_D?this.node.translate(new r(this.n,0,0),l.WORLD):e.keyCode==s.KEY_Q?this.node.eulerAngles=new r(this.node.eulerAngles.x,this.node.eulerAngles.y+this.n,this.node.eulerAngles.z):e.keyCode==s.KEY_E?this.node.eulerAngles=new r(this.node.eulerAngles.x,this.node.eulerAngles.y-this.n,this.node.eulerAngles.z):e.keyCode==s.KEY_K?a.speed=12:e.keyCode==s.KEY_M&&(a.speed=1)},t}(i))||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/CameraCtrl.ts",["cc"],(function(o){var t,r;return{setters:[function(o){t=o.cclegacy,r=o.Vec3}],execute:function(){t._RF.push({},"1ca327JptNKm526/zytuL3o","CameraCtrl",void 0);var e=o("CameraCtrl",function(){function o(){}return o.follow=function(t,e){var n=t.worldPosition.clone(),i=e.worldPosition.clone();r.lerp(o.tempv3_1,i,n,.1),t.setWorldPosition(o.tempv3_1)},o.look=function(t,e){r.subtract(o.tempv3_2,e.worldPosition,t.worldPosition),r.lerp(o.tempv3_2,t.forward,o.tempv3_2,.1),t.forward=o.tempv3_2},o.ready=function(t,e,n){t.setWorldPosition(e.worldPosition),r.subtract(o.tempv3_2,n.worldPosition,t.worldPosition),t.forward=o.tempv3_2},o}());e.tempv3_1=new r,e.tempv3_2=new r,t._RF.pop()}}}));

System.register("chunks:///_virtual/Collider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Body.ts","./Object.ts","./Shape.ts"],(function(i){var e,t,r,s,o;return{setters:[function(i){e=i.createClass},function(i){t=i.cclegacy},function(i){r=i.cBody},function(i){s=i.Trigger},function(i){o=i.ShapeSupport}],execute:function(){t._RF.push({},"e9918lPZAlNEZGC1kb/9cqo","Collider",void 0),i("cCollider",function(){function i(){this.id=0,this.pools=[],this.axis=-1,this.frameID=0,this.bodys=[],this.isDirty=!1,this.pairs=new Map}var t=i.prototype;return t.create=function(i){var e=this.pools.pop();return e?(e.object=i,e):((e=new r(i)).id=this.id++,e)},t.insert=function(i){this.bodys.push(i),i.inCollider=!0},t.remove=function(i){i.isRemove=!0},t.reset=function(){this.axis=-1,this.frameID=0,this.isDirty=!0;for(var i=this.bodys,e=i.length-1;e>=0;e--){var t=i[e];this.pools.push(t),t.clear()}i.length=0},t.clear=function(){this.id=0,this.axis=-1,this.frameID=0,this.isDirty=!0,this.pools.length=0;for(var i=this.bodys,e=i.length-1;e>=0;e--)i[e].clear();i.length=0},t.update=function(i){this.reBuild(),this.triggers()},t.triggers=function(){var i=this.axis,e=i>>2&3,t=i>>4&3,r=this.pairs,n=this.bodys,a=++this.frameID,h=0,l=0,u=n.length;for(h=0;h<u;h++){var f=n[h];if(!f.isRemove){var c=f.aabb,v=c[e],p=c[t],g=f.mask,d=f.group,b=f.upper,y=f.object;for(l=h+1;l<u;l++){var m=n[l];if(!m.isRemove){if(b<=m.lower)break;var x=m.aabb,D=m.object,R=g&m.group,k=m.mask&d;if((R||k)&&!(v>x[e+3]||x[e]>c[e+3]||p>x[t+3]||x[t]>c[t+3])){var w=y.shape.type,B=D.shape.type;if(w>B){if(!o[B|w](m,f))continue}else if(!o[w|B](f,m))continue;var I=0,j=f.id,C=m.id,_=j<C?j<<16|C:C<<16|j,T=r.get(_);null!=T?(I=s.stay,T.frameID=a):(I=s.enter,r.set(_,{key:_,a:f,b:m,frameID:a})),R&&y.trigger&&!f.isRemove&&y.onTrigger(m,I),k&&D.trigger&&!m.isRemove&&D.onTrigger(f,I)}}}}}var S=[],A=r.size,F=r.values();for(h=0;h<A;h++){var M=F.next().value;if(M.frameID!=a){var P=M.a,Z=M.b,q=P.object,z=Z.object;q&&!P.isRemove&&q.onTrigger(Z,s.exit),z&&!Z.isRemove&&z.onTrigger(P,s.exit),S.push(M.key)}}A=S.length;for(var E=0;E<A;E++)r.delete(S[E]);S.length=0},t.reBuild=function(){var i=!1,e=this.preBuildAxis();if(((3&e)!=(3&this.axis)||this.axis<0)&&(this.axis=e,i=!0),i||this.isDirty){this.isDirty=!1;var t=this.bodys;e=3&this.axis;for(var r=0,s=t.length;r!==s;r++){var o=t[r],n=o.aabb;o.lower=n[e],o.upper=n[e+3]}i?t.sort((function(i,e){return i.lower-e.lower})):this.sort(t)}},t.sort=function(i){var e,t=0,r=0;for(t=1,e=i.length;t<e;t++){var s=i[t],o=s.lower;for(r=t-1;r>=0;r--){var n=i[r];if(n.lower<=o)break;i[r+1]=n}r+1!=t&&(i[r+1]=s)}},t.preBuildAxis=function(){for(var i=0,e=0,t=0,r=0,s=0,o=0,n=0,a=0,h=0,l=0,u=this.bodys,f=u.length,c=0,v=!1,p=(this.frameID,0);p<f;p++){var g=u[p];if(g.isRemove)g.isRetrieve&&(this.pools.push(g),g.clear()),g.inCollider=!1;else{++c<=p&&(u[c-1]=g),g.updateBound()&&(v=!0);var d=g.aabb,b=d[3]-d[0],y=d[4]-d[1],m=d[5]-d[2];a+=b*b,h+=y*y,l+=m*m;var x=.5*(d[3]+d[0]);e+=x,t+=x*x;var D=.5*(d[4]+d[1]);r+=D,s+=D*D;var R=.5*(d[5]+d[2]);o+=R,n+=R*R}}this.bodys.length=c,this.isDirty=v;var k=1/c,w=(t-e*e*k)*(a=a>0?c/a:0),B=(s-r*r*k)*(h=h>0?c/h:0),I=(n-o*o*k)*(l=l>0?c/l:0);return 0==w&&(w=a),0==B&&(B=h),0==I&&(I=l),w>B?w>I?(i=0,i|=B>I?36:24):(i=2,i|=w>B?16:4):B>I?(i=1,i|=w>I?32:8):(i=2,i|=w>B?16:4),i},e(i,null,[{key:"inst",get:function(){return null==this._inst&&(this._inst=new i),this._inst}}]),i}())._inst=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"fe96fM/vjRCt7YnLti+Gea8","EventManager",void 0),e("EventManager",function(){function e(){}return e.emit=function(e){var n=this.handle[e];if(n&&!(n.length<=0)){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];for(var i=0;i<n.length;i++){var l=n[i];l.func.apply(l.target,r)}}},e.on=function(e,n,t){this.handle[e]||(this.handle[e]=[]);var r={func:n,target:t};this.handle[e].push(r)},e.off=function(e,n,t){var r=this.handle[e];if(r&&!(r.length<=0))for(var a=0;a<r.length;a++){var i=r[a];if(i.func===n&&(!t||t===i.target)){r.splice(a,1);break}}},e}()).handle={};e("EVENT_NAME",function(e){return e.gameStart="gameStart",e.gameOver="gameOver",e.clearLevel="clearLevel",e.loadLevel="loadLevel",e.arriveEnd="arriveEnd",e.inFoot="inFoot",e.relife="relife",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/fsm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./SceneManager.ts","./Player.ts"],(function(e){var n,t,i,a,o,r,l,s,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,a=e.animation,o=e.Component},function(e){r=e.EventManager,l=e.EVENT_NAME},function(e){s=e.SceneManager},function(e){c=e.Player}],execute:function(){var f;t._RF.push({},"2075e0Zs0VBW4w3+UUjvfd6","fsm",void 0);var u=i.ccclass;i.property,e("fsm",u("fsm")(f=function(e){function t(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(n=e.call.apply(e,[this].concat(i))||this).animationController=null,n}n(t,e);var i=t.prototype;return i.onEnable=function(){r.on(l.gameStart,this.gameStart,this),r.on(l.relife,this.relife,this)},i.onDisable=function(){r.off(l.gameStart,this.gameStart,this),r.off(l.relife,this.relife,this)},i.gameStart=function(){this.playAnim("run")},i.relife=function(){this.playAnim("relife")},i.aaa=function(){console.log("复活播放完了"),s.Instance.player.getComponent(c).relife(),this.playAnim("run")},i.playAnim=function(e){switch(this.animationController||(this.animationController=this.node.getComponent(a.AnimationController)),e){case"run":this.animationController.setValue("run",!0);break;case"idle":this.animationController.setValue("idle",!0);break;case"dance":this.animationController.setValue("dance",!0);break;case"die":this.animationController.setValue("die",!0);break;case"relife":this.animationController.setValue("relife",!0)}},t}(o))||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/InputData.ts",["cc"],(function(t){var c,n;return{setters:[function(t){c=t.cclegacy,n=t._decorator}],execute:function(){c._RF.push({},"c4dd4IYQXNJPY4068/KbVvG","InputData",void 0);n.ccclass,n.property;t("InputData",(function(){})).x=0,c._RF.pop()}}}));

System.register("chunks:///_virtual/Level.ts",["cc"],(function(e){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"c5f341jQ85GRZIrqYdyWH+x","Level",void 0);e("level",{1:[1,2,1,2,3,5,4,1,1,2,4,8],2:[1,1,1,4,2,3,4,5,4,1,3,1,1,8],3:[1,1,2,4,4,2,3,5,1,4,2,1,1,8],4:[1,1,4,2,2,2,5,1,3,4,1,2,3,4,8],5:[1,1,1,1,1,5,4,1,1,8],6:[1,1,1,2,2,3,3,5,4,4,7,1,1,8],7:[1,4,4,2,2,3,5,3,4,4,1,7,7,7,1,1,8]});c._RF.pop()}}}));

System.register("chunks:///_virtual/localStorageData.ts",["cc","./audioManager.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.AudioManager}],execute:function(){e._RF.push({},"b56a9//VtZDQ4I0NcBd1gla","localStorageData",void 0);t("localStorageData",function(){function t(){}return t.setLocalData=function(t,e){localStorage.setItem(t,e)},t.getLocalData=function(t,e){var n=localStorage.getItem(t);return null==n&&(this.setLocalData(t,e),n=e),n},t.soundOpen=function(){return"1"==this.getLocalData("sound","1")},t.chengeSoundState=function(){this.setLocalData("sound",this.soundOpen()?"0":"1"),this.soundOpen()?(n.instance.openMusic(),n.instance.openSound()):(n.instance.closeMusic(),n.instance.closeSound())},t.getCoin=function(){return Number(this.getLocalData("coin","100"))},t.addCoin=function(t){var e=this.getCoin()+t;e<0&&(e=0),this.setCoin(e)},t.setCoin=function(t){this.setLocalData("coin",t+"")},t.getLevel=function(){return Number(this.getLocalData("level","1"))},t.addLevel=function(){this.setLevel(this.getLevel()+1)},t.setLevel=function(t){this.setLocalData("level",t+"")},t.getSkinHad=function(t){return"true"==this.getLocalData("had_"+t,"false")},t.setSkinHad=function(t,e){this.setLocalData("had_"+t,String(e))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./CameraCheck.ts","./CameraCtrl.ts","./InputData.ts","./EventManager.ts","./Level.ts","./Player.ts","./RecourceLoad.ts","./SceneManager.ts","./WalkOnRoad.ts","./AILib.ts","./Body.ts","./Collider.ts","./Object.ts","./Shape.ts","./audioManager.ts","./fsm.ts","./localStorageData.ts","./playerx.ts","./tong.ts","./UIManager.ts","./UIfail.ts","./UIgame.ts","./UIloading.ts","./UImain.ts","./UIrelife.ts","./UIutils.ts","./UIwin.ts","./wall.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Object.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Collider.ts","./Shape.ts"],(function(e){var t,i,n,r,o,s,u,a,c,l,h,p,y,b,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,u=e.ccenum,a=e.PhysicsSystem,c=e.Vec3,l=e.Component},function(e){h=e.cCollider},function(e){p=e.ShapeType,y=e.cCapsule,b=e.cSphere,d=e.cBox}],execute:function(){var f,g,S,m,v,R,w,z,D,T,x,C,B,O,P,j,k;o._RF.push({},"f834eM8pElOqJ717Yz/Xt9+","Object",void 0);var A=s.ccclass,L=s.property,N=e("Trigger",function(e){return e[e.default=0]="default",e[e.enter=1]="enter",e[e.stay=2]="stay",e[e.exit=3]="exit",e}({})),_=e("Dirty",function(e){return e[e.R=1]="R",e[e.T=2]="T",e[e.S=4]="S",e[e.RTS=7]="RTS",e[e.RS=5]="RS",e[e.NON=0]="NON",e}({}));u(p);e("cObject",(f=A("cObject"),g=L({group:"Body"}),S=L({type:a.PhysicsGroup,group:"Body"}),m=L({type:p,group:"Shape"}),v=L({group:"Shape"}),R=L({group:"Shape",visible:function(){return this.type==p.Box}}),w=L({group:"Shape",visible:function(){return this.type!=p.Box}}),z=L({group:"Shape",visible:function(){return this.type==p.Capsule}}),f((x=t((T=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"trigger",x,r(t)),n(t,"group",C,r(t)),n(t,"type",B,r(t)),n(t,"center",O,r(t)),n(t,"size",P,r(t)),n(t,"radius",j,r(t)),n(t,"height",k,r(t)),t.isDirty=_.RTS,t.shape=null,t.body=null,t.velocity=new c,t.speed=0,t.angle=0,t}i(t,e);var o=t.prototype;return o.onLoad=function(){switch(this.type){case p.Box:this.shape=new d(this.center,this.size);break;case p.Sphere:this.shape=new b(this.center,this.radius);break;case p.Capsule:this.shape=new y(this.center,this.radius,this.height)}this.body=h.inst.create(this),this.body.shape=this.shape,this.body.group=this.group,this.body.mask=a.instance.collisionMatrix[this.group],h.inst.insert(this.body),this.isDirty=_.RTS},o.setPosition=function(e){this.node.position=e,this.isDirty|=_.T},o.updateDirty=function(){this.isDirty|=_.RTS},o.setRotation=function(e){this.node.rotation=e,this.isDirty|=_.R},o.setScale=function(e){this.node.scale=e,this.isDirty|=_.S},o.getRotation=function(){return this.node.rotation},o.getPosition=function(){return this.node.position},o.getScale=function(){return this.node.scale},o.remove=function(e){return void 0===e&&(e=!0),null!=this.body&&(this.body.isRetrieve=e,h.inst.remove(this.body)),this.node},o.insert=function(e){this.body&&(this.body.isRemove=!1,this.body.isRetrieve=!1,this.body.inCollider||h.inst.insert(this.body)),e&&e.addChild(this.node)},o.setAnimation=function(e){},o.setColor=function(e){},o.init=function(){},o.onTrigger=function(e,t){switch(t){case N.enter:console.log("碰到了",e.object.node.name);break;case N.stay:case N.exit:}},o.onDestroy=function(){this.unscheduleAllCallbacks(),this.shape=null,this.body=null},t}(l)).prototype,"trigger",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=t(T.prototype,"group",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.PhysicsGroup.DEFAULT}}),B=t(T.prototype,"type",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.Box}}),O=t(T.prototype,"center",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),P=t(T.prototype,"size",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),j=t(T.prototype,"radius",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=t(T.prototype,"height",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=T))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WalkOnRoad.ts","./SceneManager.ts","./CameraCtrl.ts","./fsm.ts","./EventManager.ts","./InputData.ts","./tong.ts","./UIManager.ts","./audioManager.ts"],(function(t){var o,e,i,n,s,l,a,r,h,d,m,g,u,c,f,y,p,_,P,v,w,x,b,I;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,a=t.Node,r=t.Vec3,h=t.director,d=t.instantiate,m=t.v3,g=t.game,u=t.Component},function(t){c=t.WalkOnRoad},function(t){f=t.SceneManager},function(t){y=t.CameraCtrl},function(t){p=t.fsm},function(t){_=t.EventManager,P=t.EVENT_NAME},function(t){v=t.InputData},function(t){w=t.tong},function(t){x=t.UIManager,b=t.UIname},function(t){I=t.AudioManager}],execute:function(){var k,T,C,M,R,E,N,z,A,S,W;s._RF.push({},"aa99dxKe+pEVrGisMYnghza","Player",void 0);var B=l.ccclass,U=l.property;t("Player",(k=B("Player"),T=U(a),C=U(a),M=U(a),R=U(a),k((z=o((N=function(t){function o(){for(var o,e=arguments.length,s=new Array(e),l=0;l<e;l++)s[l]=arguments[l];return o=t.call.apply(t,[this].concat(s))||this,i(o,"topPoint",z,n(o)),i(o,"leftPoint",A,n(o)),i(o,"rightPoint",S,n(o)),i(o,"follow",W,n(o)),o.camera=void 0,o.model_x=void 0,o.model_y=void 0,o.model=void 0,o.skin=void 0,o.fsm=void 0,o.look=void 0,o.offset=0,o.tong_should_high=0,o.shouldPos=new r,o.myTong=[],o.movex_speed=2,o.v3=new r,o.eu_y=0,o.rot_speed=45,o}e(o,t);var s=o.prototype;return s.start=function(){this.camera=h.getScene().getChildByName("Main Camera"),this.model_x=this.node.getChildByName("modelx"),this.model_y=this.model_x.getChildByName("modely"),this.model=this.model_y.getChildByName("model"),this.look=this.node.getChildByName("look"),y.ready(this.camera,this.follow,this.node),this.initSkin()},s.onEnable=function(){_.on(P.arriveEnd,this.arriveEnd,this)},s.onDisable=function(){_.off(P.arriveEnd,this.arriveEnd,this),console.log("this.myTong=[]"),this.myTong=[]},s.relife=function(){for(var t=0;t<3;t++){var o=f.Instance.createBarrel();o.setParent(h.getScene().getChildByName("tong")),o.getComponent(w).isfoot=!0,o.setWorldPosition(this.model_x.worldPosition),o.setWorldRotation(this.model_x.worldRotation),this.myTong.push(o)}f.Instance.gaming=!0},s.arriveEnd=function(){f.Instance.gaming=!1;for(var t=0,o=this.myTong.length;t<o;t++)this.myTong.pop().removeFromParent();this.fsm.playAnim("dance"),setTimeout((function(){x.Instance.closePanel(b.UIgame),x.Instance.openPanel(b.UIwin)}),1e3)},s.initSkin=function(){this.skin=d(f.Instance.PrefabMap.get("skin_0")),this.skin.setParent(this.model),this.fsm=this.skin.getComponent(p),this.fsm.playAnim("idle")},s.update=function(t){if(1/t<10)console.log("帧率过低!!!");else{if(f.Instance.gaming&&(c.onRoad(this.node,this.topPoint,t),c.walkForward(this.node,t),y.follow(this.camera,this.follow),y.look(this.camera,this.look),c.stayMiddle(this.node,this.leftPoint,this.rightPoint),this.move(t),this.rot(t)),this.myTong.length>0)for(var o=this.myTong.length-1;o>=0;o--){var e=this.myTong[o];this.tong_should_high=this.myTong.length-o-.5,this.shouldPos.set(this.model_x.worldPosition.x,this.model_x.worldPosition.y+this.tong_should_high,this.model_x.worldPosition.z),r.lerp(this.shouldPos,e.worldPosition,this.shouldPos,.5),e.setWorldPosition(this.model_x.worldPosition.x,this.shouldPos.y,this.model_x.worldPosition.z),e.setWorldRotation(this.model.worldRotation)}this.setHight(this.myTong.length,t)}},s.setround=function(){for(var t=!0,o=this.myTong.length-1;o>=0;o--){this.myTong[o].getComponent(w).round=t,t=!t}},s.setHight=function(t,o){var e=new r(this.model_y.position.x,t,0);r.lerp(e,this.model_y.position,e,.5),this.model_y.setPosition(e)},s.setWall=function(){if(this.myTong.length>0){I.instance.playSound("barrelblock");var t=this.myTong.pop();t.getComponent(w).isfoot=!1,t.setWorldPosition(this.model_x.worldPosition.x,this.model_x.worldPosition.y+.5,this.model_x.worldPosition.z),t.setWorldRotation(this.model_x.worldRotation)}else I.instance.playSound("blockwall"),f.Instance.gaming=!1,this.fsm.playAnim("die"),this.scheduleOnce((function(){x.Instance.closePanel(b.UIgame),x.Instance.openPanel(b.UIrelife)}),.5)},s.move=function(t){this.offset=v.x*t*this.movex_speed;var o=this.model_x.position.x+this.offset;o>3?o=3:o<-3&&(o=-3),this.model_x.setPosition(o,this.model_x.position.y,0)},s.rot=function(t){this.eu_y=this.model.eulerAngles.y-v.x*this.rot_speed,this.eu_y>45?this.eu_y=45:this.eu_y<-45&&(this.eu_y=-45),this.v3=m(0,this.eu_y,0),r.lerp(this.v3,this.model.eulerAngles,this.v3,.1*Number(g.frameRate)*t),0==v.x&&r.lerp(this.v3,this.model.eulerAngles,r.ZERO,.1*Number(g.frameRate)*t),this.model.eulerAngles=this.v3},o}(u)).prototype,"topPoint",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=o(N.prototype,"leftPoint",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=o(N.prototype,"rightPoint",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=o(N.prototype,"follow",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=N))||E));s._RF.pop()}}}));

System.register("chunks:///_virtual/playerx.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Object.ts","./tong.ts","./Player.ts","./SceneManager.ts","./audioManager.ts"],(function(e){var t,n,o,r,a,c,i,s,l;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator},function(e){r=e.Trigger,a=e.cObject},function(e){c=e.tong},function(e){i=e.Player},function(e){s=e.SceneManager},function(e){l=e.AudioManager}],execute:function(){var u;n._RF.push({},"1e6518tPmpE4bfQE7cWPIbU","playerx",void 0);var p=o.ccclass;o.property,e("playerx",p("playerx")(u=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).player=null,t}t(n,e);var o=n.prototype;return o.start=function(){this.player=this.node.parent.getComponent(i)},o.update=function(e){s.Instance.gaming&&this.updateDirty()},o.onTrigger=function(e,t){switch(t){case r.enter:if("barrel"==e.object.node.name){console.log("碰到了木桶");var n=e.object.node;0==n.getComponent(c).isfoot&&(n.getComponent(c).isfoot=!0,l.instance.playSound("getbarrel"),this.player.myTong.push(n),this.player.setround())}else"barrier"==e.object.node.name&&(console.log("碰到了墙"),this.player.setWall());break;case r.stay:case r.exit:}},o.onDisable=function(){this.remove(!0)},n}(a))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/RecourceLoad.ts",["cc"],(function(e){var n,o,r;return{setters:[function(e){n=e.cclegacy,o=e.error,r=e.resources}],execute:function(){n._RF.push({},"e3c8616TLpPQJRoVhpccKLG","RecourceLoad",void 0);e("ResourceLoad",function(){function e(){}return e.loadPrefabRes=function(e){var n=this;return new Promise((function(r,c){n.loadres(e,(function(n,t){if(n)return o("effect load failed",e),void(c&&c());r&&r(t)}))}))},e.loadImgRes=function(e){var n=this;return new Promise((function(r,c){n.loadres(e,(function(n,t){if(n)return o("effect load failed",e),void(c&&c());r&&r(t)}))}))},e.loadres=function(e,n){r.load(e,(function(e,r){if(e)return o(e.message||e),void n(e,r);n&&n(null,r)}))},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SceneManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RecourceLoad.ts","./localStorageData.ts","./wall.ts","./tong.ts","./EventManager.ts","./Collider.ts"],(function(t){var e,a,r,n,i,o,s,h,l,d,c,u,g,f,m,p,v,y;return{setters:[function(t){e=t.createClass,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){n=t.cclegacy,i=t._decorator,o=t.director,s=t.instantiate,h=t.Vec3,l=t.profiler,d=t.game,c=t.PhysicsSystem},function(t){u=t.ResourceLoad},function(t){g=t.localStorageData},function(t){f=t.wall},function(t){m=t.tong},function(t){p=t.EventManager,v=t.EVENT_NAME},function(t){y=t.cCollider}],execute:function(){n._RF.push({},"7a722f7wq5CiqorhmgRSucE","SceneManager",void 0);i.ccclass,i.property;t("SceneManager",function(){function t(){this.PrefabMap=new Map,this.waitingList=[],this.gaming=!1,this.player=null,this.tempv3=new h,this.flagNum_1=0,this.flagNum_max=3,this.bornRandom=.5,this.tongshu=0,this.qiangshu=0,this.roundRandom=.3,this.roundarr=[5,6,9,10],this.straightarr=[1,2,3,4,7]}var n=t.prototype;return n.onLoad=function(){var t=a(r().mark((function t(){var e,a,n=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l.hideStats(),d.frameRate=30,c.instance.fixedTimeStep=1/30,e=r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.waitingList.push(u.loadPrefabRes("road/roadStraight_"+e+"_").then((function(t){n.PrefabMap.set("road_"+e,t)})));case 1:case"end":return t.stop()}}),t)})),a=1;case 5:if(!(a<11)){t.next=10;break}return t.delegateYield(e(a),"t0",7);case 7:a++,t.next=5;break;case 10:return this.waitingList.push(u.loadPrefabRes("player/player").then((function(t){n.PrefabMap.set("player",t)}))),this.waitingList.push(u.loadPrefabRes("player/roles/skin_0").then((function(t){n.PrefabMap.set("skin_0",t)}))),this.waitingList.push(u.loadPrefabRes("barrel/barrel").then((function(t){n.PrefabMap.set("barrel",t)}))),this.waitingList.push(u.loadPrefabRes("barrier/barrier").then((function(t){n.PrefabMap.set("barrier",t)}))),t.next=16,Promise.all(this.waitingList);case 16:console.log("第一次碰撞组",y.inst.bodys.length),console.log("第一次pool",y.inst.pools.length),this.init(),p.on(v.clearLevel,this.clear,this);case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.init=function(){this.initLevel(),this.initBarrel(),this.initPlayer()},n.clear=function(t){var e=this;void 0===t&&(t=""),this.player.removeFromParent(),this.player=null,o.getScene().getChildByName("roads").removeAllChildren(),o.getScene().getChildByName("tong").removeAllChildren(),o.getScene().getChildByName("barriar").removeAllChildren(),this.init(),"next"==t&&setTimeout((function(){e.gaming=!0,p.emit(v.gameStart)}),100)},n.initPlayer=function(){this.player=s(this.PrefabMap.get("player")),this.player.setParent(o.getScene()),this.player.setWorldPosition(new h(-5,5.1,5))},n.initLevel=function(){var t=g.getLevel(),e=this.getLevelData(t);console.log("路块数组",e);for(var a,r=o.getScene().getChildByName("roads"),n=0;n<e.length;n++){var i=e[n],l=s(this.PrefabMap.get("road_"+i));if(l.setParent(r),a){var d=a.getChildByName("end"),c=l.getChildByName("start");l.forward=d.forward,h.subtract(this.tempv3,l.worldPosition,c.worldPosition),h.add(this.tempv3,d.worldPosition,this.tempv3),l.setWorldPosition(this.tempv3)}a=l}},n.removeRoad=function(){o.getScene().getChildByName("roads").destroyAllChildren()},n.initBarrel=function(){this.tongshu=0,this.qiangshu=0,this.flagNum_1=0;for(var t=o.getScene().getChildByName("tong"),e=o.getScene().getChildByName("barriar"),a=o.getScene().getChildByName("roads"),r=1;r<a.children.length-3;r++){var n=a.children[r];if(!(n.name.includes("5")||n.name.includes("6")||n.name.includes("9")||n.name.includes("10")))for(var i=n.getChildByName("pos").children,l=0;l<i.length;l++)if(Math.random()<this.bornRandom){var d=i[l];if(this.flagNum_1<this.flagNum_max){var c=s(this.PrefabMap.get("barrel"));c.setParent(t),c.setWorldPosition(d.worldPosition.x,d.worldPosition.y+.5,d.worldPosition.z),c.setWorldRotation(d.worldRotation),c.translate(new h((Math.random()>.5?1:-1)*Math.random()*2.5,0,0)),c.getComponent(m).updateDirty(),this.flagNum_1+=1,this.tongshu+=1}else{var u=s(this.PrefabMap.get("barrier"));u.setParent(e),u.setWorldPosition(d.worldPosition),u.setWorldRotation(d.worldRotation),u.getComponent(f).updateDirty(),this.flagNum_1-=1,this.qiangshu+=1}}}},n.createBarrel=function(){return s(this.PrefabMap.get("barrel"))},n.getLevelData=function(t){var e=[1,1],a=0,r=1;(a=t<10?15:Math.floor((t-10)/3+15))>30&&(a=30);for(var n=0,i=0;i<a-2;i++)0==n?Math.random()<this.roundRandom?5==(r=this.roundarr[Math.floor(Math.random()*this.roundarr.length)])||6==r?n+=1:n-=1:r=this.straightarr[Math.floor(Math.random()*this.straightarr.length)]:-1==n?Math.random()<this.roundRandom?(r=Math.random()>.5?5:6,n+=1):r=this.straightarr[Math.floor(Math.random()*this.straightarr.length)]:1==n&&(Math.random()<this.roundRandom?(r=Math.random()>.5?9:10,n-=1):r=this.straightarr[Math.floor(Math.random()*this.straightarr.length)]),e.push(r);return e.push(1),e.push(1),e.push(8),e},e(t,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/Shape.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AILib.ts"],(function(e){var t,i,n,a,r,s;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.Vec3},function(e){a=e.obbIntersect,r=e.sphereAABBDistance,s=e.sphereOBBDistance}],execute:function(){i._RF.push({},"83d94jbLnZF7oVs2WQ1jJK+","Shape",void 0);var h=e("ShapeType",function(e){return e[e.Box=1]="Box",e[e.Sphere=2]="Sphere",e[e.Capsule=4]="Capsule",e}({})),u=e("cShape",function(){function e(e,t){this.radius=0,this.height=0,this.type=h.Box,this.size={x:0,y:0,z:0},this.center={x:0,y:0,z:0},this.halfSize={x:0,y:0,z:0},this.aabb=[0,0,0,0,0,0],this.type=t,this.center.x=e.x,this.center.y=e.y,this.center.z=e.z}var t=e.prototype;return t.rotateAABB=function(e){var t=this.center,i=t.x,n=t.y,a=t.z,r=this.halfSize,s=r.x,h=r.y,u=r.z,o=e.m00,c=e.m01,z=e.m02,l=e.m03,f=e.m04,p=e.m05,S=e.m06,x=e.m07,y=e.m08,g=o*i+l*n+S*a,B=c*i+f*n+x*a,b=z*i+p*n+y*a,C=Math.abs(o)*s+Math.abs(l)*h+Math.abs(S)*u,d=Math.abs(c)*s+Math.abs(f)*h+Math.abs(x)*u,v=Math.abs(z)*s+Math.abs(p)*h+Math.abs(y)*u,A=this.aabb;return A[0]=g-C,A[1]=B-d,A[2]=b-v,A[3]=g+C,A[4]=B+d,A[5]=b+v,A},t.normalAABB=function(){var e=this.aabb,t=this.halfSize,i=this.center,n=i.x,a=i.y,r=i.z;e[0]=n-t.x,e[1]=a-t.y,e[2]=r-t.z,e[3]=n+t.x,e[4]=a+t.y,e[5]=r+t.z},t.updateAABB=function(e,t){void 0===t&&(t=!0),t||this.type==h.Sphere?this.normalAABB():this.rotateAABB(e)},e}()),o=(e("cBox",function(e){function i(t,i){var n;return(n=e.call(this,t,h.Box)||this).size.x=i.x,n.size.y=i.y,n.size.z=i.z,n.halfSize.x=.5*i.x,n.halfSize.y=.5*i.y,n.halfSize.z=.5*i.z,n}return t(i,e),i}(u)),e("cSphere",function(e){function i(t,i){var n;return(n=e.call(this,t,h.Sphere)||this).radius=i,n.size.x=2*i,n.size.y=2*i,n.size.z=2*i,n.halfSize.x=i,n.halfSize.y=i,n.halfSize.z=i,n}return t(i,e),i}(u)),e("cCapsule",function(e){function i(t,i,n){var a;return(a=e.call(this,t,h.Capsule)||this).radius=i,a.height=n,a.size.x=2*i,a.size.y=2*n,a.size.z=2*i,a.halfSize.x=i,a.halfSize.y=n,a.halfSize.z=i,a}return t(i,e),i}(u)),new n),c=e("ShapeSupport",[]);c[h.Box|h.Box]=function(e,t){return!(!e.isIdentity||!t.isIdentity)||a(e.getCenter(),e.getHalfSize(),e.getRotMat3(),t.getCenter(),t.getHalfSize(),t.getRotMat3())},c[h.Box|h.Sphere]=function(e,t){return e.isIdentity?(n.subtract(o,t.getCenter(),e.getCenter()),r(o,t.getRaidus(),e.getHalfSize())):s(t.getCenter(),t.getRaidus(),e.getCenter(),e.getRotation(),e.getHalfSize())},c[h.Sphere|h.Sphere]=function(e,t){var i=e.getCenter(),a=t.getCenter();n.subtract(o,i,a);var r=o.lengthSqr(),s=e.getRaidus()+t.getRaidus();return r<=s*s},c[h.Box|h.Capsule]=function(e,t){return!0},c[h.Sphere|h.Capsule]=function(e,t){return!0},c[h.Capsule|h.Capsule]=function(e,t){return!0},i._RF.pop()}}}));

System.register("chunks:///_virtual/tong.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Object.ts"],(function(e){var t,s,o,i,n,l,r;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy,o=e._decorator,i=e.Vec3,n=e.v3},function(e){l=e.Trigger,r=e.cObject}],execute:function(){var h;s._RF.push({},"72f2fENQeBNR6g6XDfFMGvr","tong",void 0);var u=o.ccclass;o.property,e("tong",u("tong")(h=function(e){function s(){for(var t,s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).isfoot=!1,t.model=void 0,t.r_speed=200,t.round=!0,t.shouldv3=new i,t.shouldv32=new i,t.offset=0,t.time0=0,t.time1=.5,t}t(s,e);var o=s.prototype;return o.onDisable=function(){this.remove(!0)},o.start=function(){this.model=this.node.getChildByName("t")},o.update=function(e){this.isfoot&&(this.round?this.model.eulerAngles=new i(this.model.eulerAngles.x,this.model.eulerAngles.y,this.model.eulerAngles.z-this.r_speed*e):this.model.eulerAngles=new i(this.model.eulerAngles.x,this.model.eulerAngles.y,this.model.eulerAngles.z+this.r_speed*e),this.time0+=e,this.time0>this.time1&&(this.time0=0,this.offset=.03*Math.random()*(Math.random()>.5?1:-1),this.shouldv3=n(this.model.position.x+this.offset,0,0)),i.lerp(this.shouldv32,this.model.position,this.shouldv3,.01),this.model.setPosition(this.shouldv32))},o.onTrigger=function(e,t){switch(t){case l.enter:case l.stay:case l.exit:}},s}(r))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/UIfail.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localStorageData.ts","./UIManager.ts","./EventManager.ts","./audioManager.ts"],(function(n){var e,t,i,a,o,l,r,c,s,u,f,p,h,g,m;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,a=n.assertThisInitialized},function(n){o=n.cclegacy,l=n._decorator,r=n.Label,c=n.Node,s=n.Component},function(n){u=n.localStorageData},function(n){f=n.UIManager,p=n.UIname},function(n){h=n.EventManager,g=n.EVENT_NAME},function(n){m=n.AudioManager}],execute:function(){var v,B,b,k,y,I,d,H,U;o._RF.push({},"55d92UjkC1LkoeYq7vEM1Es","UIfail",void 0);var M=l.ccclass,E=l.property;n("UIfail",(v=M("UIfail"),B=E(r),b=E(c),k=E(c),v((d=e((I=function(n){function e(){for(var e,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return e=n.call.apply(n,[this].concat(o))||this,i(e,"level",d,a(e)),i(e,"HomeBtn",H,a(e)),i(e,"againBtn",U,a(e)),e}t(e,n);var o=e.prototype;return o.onEnable=function(){this.HomeBtn.on("click",this.HomeBtnClick,this),this.againBtn.on("click",this.HomeBtnClick,this),this.onshow()},o.onDisable=function(){this.HomeBtn.off("click",this.HomeBtnClick,this),this.againBtn.off("click",this.HomeBtnClick,this)},o.HomeBtnClick=function(){f.Instance.closePanel(p.UIfail),f.Instance.openPanel(p.UImain),h.emit(g.clearLevel)},o.onshow=function(){m.instance.playSound("fail"),this.level.string="第"+u.getLevel()+"关"},e}(s)).prototype,"level",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(I.prototype,"HomeBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(I.prototype,"againBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=I))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIgame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InputData.ts"],(function(t){var n,e,o,i,s,a,h,c,l,r;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,h=t.Node,c=t.Input,l=t.Component},function(t){r=t.InputData}],execute:function(){var u,p,f,T,v;s._RF.push({},"360d9YBW8hFBZMX5o0Fh28y","UIgame",void 0);var y=a.ccclass,_=a.property;t("UIgame",(u=y("UIgame"),p=_(h),u((v=n((T=function(t){function n(){for(var n,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=t.call.apply(t,[this].concat(s))||this,o(n,"touchPanel",v,i(n)),n.last_x=0,n}e(n,t);var s=n.prototype;return s.onEnable=function(){this.touchPanel.on(c.EventType.TOUCH_MOVE,this.onMove,this),this.touchPanel.on(c.EventType.TOUCH_START,this.onDown,this),this.touchPanel.on(c.EventType.TOUCH_END,this.onUp,this),this.touchPanel.on(c.EventType.TOUCH_CANCEL,this.onUp,this)},s.onDisable=function(){this.touchPanel.off(c.EventType.TOUCH_MOVE,this.onMove,this),this.touchPanel.off(c.EventType.TOUCH_START,this.onDown,this),this.touchPanel.off(c.EventType.TOUCH_END,this.onUp,this),this.touchPanel.off(c.EventType.TOUCH_CANCEL,this.onUp,this)},s.onDown=function(t){this.last_x=t.getLocationX(),r.x=0},s.onMove=function(t){var n=t.getLocationX(),e=n-this.last_x;this.last_x!=n?(this.last_x=n,r.x=e):r.x=0},s.onUp=function(t){this.last_x=0,r.x=0},n}(l)).prototype,"touchPanel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=T))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIloading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneManager.ts","./UIManager.ts"],(function(t){var e,n,r,i,o,a,s,c,u,p,l,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,u=t.ProgressBar,p=t.Component},function(t){l=t.SceneManager},function(t){h=t.UIManager}],execute:function(){var d,f,g,b,y;s._RF.push({},"26b84doM0BC5KdYdXhZqvRC","UIloading",void 0);var v=c.ccclass,I=c.property;t("UIloading",(d=v("UIloading"),f=I(u),d((y=e((b=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"p",y,i(e)),e.b=0,e.ok=!1,e}n(e,t);var s=e.prototype;return s.onLoad=function(){var t=o(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Instance.onLoad();case 2:this.ok=!0;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.update=function(t){this.ok?(this.b+=2,this.b>100&&(this.b=100),this.p.progress=this.b/100,100==this.b&&(h.Instance.openPanel("UImain"),this.node.destroy())):(this.b+=1,this.b>70&&(this.b=70),this.p.progress=this.b/100)},e}(p)).prototype,"p",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=b))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/UImain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localStorageData.ts","./RecourceLoad.ts","./UIutils.ts","./UIManager.ts","./EventManager.ts","./SceneManager.ts","./audioManager.ts"],(function(n){var i,t,e,o,a,r,l,c,s,u,p,d,f,g,h,m,b,C,y;return{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.inheritsLoose,e=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,l=n.Node,c=n.Label,s=n.Sprite,u=n.Component},function(n){p=n.localStorageData},function(n){d=n.ResourceLoad},function(n){f=n.Utils},function(n){g=n.UIManager,h=n.UIname},function(n){m=n.EventManager,b=n.EVENT_NAME},function(n){C=n.SceneManager},function(n){y=n.AudioManager}],execute:function(){var k,v,I,S,M,U,w,F,z,N,P,L,R,A,D;a._RF.push({},"c0219dt/1RG5q8i+3F0o5Hj","UImain",void 0);var E=r.ccclass,_=r.property;n("UImain",(k=E("UImain"),v=_(l),I=_(l),S=_(c),M=_(l),U=_(c),w=_(l),k((N=i((z=function(n){function i(){for(var i,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=n.call.apply(n,[this].concat(a))||this,e(i,"startPanel",N,o(i)),e(i,"clicktip",P,o(i)),e(i,"coinNum",L,o(i)),e(i,"sound",R,o(i)),e(i,"level",A,o(i)),e(i,"addCoin",D,o(i)),i}t(i,n);var a=i.prototype;return a.onLoad=function(){y.instance.init()},a.start=function(){y.instance.playMusic("bgm",!0)},a.onSoundClick=function(){var n=this;p.chengeSoundState();var i=p.soundOpen();d.loadImgRes(i?"ui/yinon/spriteFrame":"ui/yinoff/spriteFrame").then((function(i){n.sound.getComponent(s).spriteFrame=i}))},a.onAddCoin=function(){p.addCoin(500),this.coinNum.string=p.getCoin()+""},a.onStartClick=function(){console.log(11111),g.Instance.closePanel(h.UImain),g.Instance.openPanel(h.UIgame),m.emit(b.gameStart),C.Instance.gaming=!0},a.onshow=function(){var n=this;this.coinNum.string=p.getCoin()+"",console.log("主页更新金币",this.coinNum.string,p.getCoin()),this.level.string="第"+p.getLevel()+"关";var i=p.soundOpen();d.loadImgRes(i?"ui/yinon/spriteFrame":"ui/yinoff/spriteFrame").then((function(i){n.sound.getComponent(s).spriteFrame=i}))},a.onEnable=function(){this.onshow(),f.ImgBreath(this.clicktip),this.startPanel.on("click",this.onStartClick,this),this.addCoin.on("click",this.onAddCoin,this),this.sound.on("click",this.onSoundClick,this)},a.onDisable=function(){f.stopBreath(this.clicktip),this.startPanel.off("click",this.onStartClick,this),this.addCoin.off("click",this.onAddCoin,this),this.sound.off("click",this.onSoundClick,this)},i}(u)).prototype,"startPanel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=i(z.prototype,"clicktip",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=i(z.prototype,"coinNum",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(z.prototype,"sound",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=i(z.prototype,"level",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(z.prototype,"addCoin",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=z))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,a,o,s,l;return{setters:[function(e){n=e.createForOfIteratorHelperLoose,t=e.createClass},function(e){i=e.cclegacy,a=e.find,o=e.resources,s=e.Prefab,l=e.instantiate}],execute:function(){i._RF.push({},"0db2cKgfo5Icab4l1E7UQb6","UIManager",void 0),e("UIManager",function(){function e(){this.uiRoot=void 0,this.panels=new Map}var i=e.prototype;return i.openPanel=function(e,n){var t=this;if(void 0===n&&(n=!0),this.uiRoot||(this.uiRoot=a("UIRoot")),this.panels.has(e)){var i=this.panels.get(e);return i.active=!0,void(n&&i.setSiblingIndex(this.uiRoot.children.length-1))}o.load("ui/"+e,s,(function(i,a){var o=l(a);t.uiRoot.addChild(o),t.panels.set(e,o),n&&o.setSiblingIndex(t.uiRoot.children.length-1)}))},i.closePanel=function(e,n){if(void 0===n&&(n=!1),this.panels.has(e)){var t=this.panels.get(e);t&&(n?t.removeFromParent():t.active=!1)}},i.showDialog=function(e){for(var n in r)n==e?this.openPanel(n):this.closePanel(n)},i.closeDialog=function(){for(var e in r)this.closePanel(e)},i.clearAllPanels=function(){for(var e,t=n(this.panels.values());!(e=t()).done;){e.value.removeFromParent()}this.panels=new Map,this.uiRoot=null},t(e,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0;var r=e("DialogDef",function(e){return e.UISetting="UISetting",e.UISkillUpgrade="UISkillUpgrade",e.UISettlement="UISettlement",e}({}));e("UIname",function(e){return e.UImain="UImain",e.UIgame="UIgame",e.UIwin="UIwin",e.UIfail="UIfail",e.UIrelife="UIrelife",e}({}));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIrelife.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localStorageData.ts","./UIManager.ts","./EventManager.ts"],(function(e){var i,n,t,l,r,o,a,c,s,u,f,p,g,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,a=e.Label,c=e.Node,s=e.Component},function(e){u=e.localStorageData},function(e){f=e.UIManager,p=e.UIname},function(e){g=e.EventManager,h=e.EVENT_NAME}],execute:function(){var v,I,b,B,U,k,y,m,d;r._RF.push({},"7d3b5c8TotLRa+TUKRK2phb","UIrelife",void 0);var C=o.ccclass,w=o.property;e("UIrelife",(v=C("UIrelife"),I=w(a),b=w(c),B=w(c),v((y=i((k=function(e){function i(){for(var i,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return i=e.call.apply(e,[this].concat(r))||this,t(i,"level",y,l(i)),t(i,"relifeBtn",m,l(i)),t(i,"giveupBtn",d,l(i)),i}n(i,e);var r=i.prototype;return r.onEnable=function(){this.relifeBtn.on("click",this.relifeBtnClick,this),this.giveupBtn.on("click",this.giveupBtnClick,this),this.onshow()},r.relifeBtnClick=function(){console.log("点击了复活"),f.Instance.closePanel(p.UIrelife),f.Instance.openPanel(p.UIgame),g.emit(h.relife)},r.giveupBtnClick=function(){console.log("点击了放弃"),f.Instance.closePanel(p.UIrelife),f.Instance.openPanel(p.UIfail)},r.onDisable=function(){this.relifeBtn.off("click",this.relifeBtnClick,this),this.giveupBtn.off("click",this.giveupBtnClick,this)},r.onshow=function(){this.level.string="第"+u.getLevel()+"关"},i}(s)).prototype,"level",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=i(k.prototype,"relifeBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=i(k.prototype,"giveupBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=k))||U));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIutils.ts",["cc"],(function(t){var e,n,c,s;return{setters:[function(t){e=t.cclegacy,n=t.tween,c=t.Vec3,s=t.Tween}],execute:function(){e._RF.push({},"2c766Spfu9KTrG5djz3W81L","UIutils",void 0);t("Utils",function(){function t(){}return t.ImgBreath=function(t){var e=this;n(t).to(.5,{scale:new c(1.2,1.2,1.2)}).call((function(){n(t).to(.5,{scale:new c(1,1,1)}).call((function(){e.ImgBreath(t)})).start()})).start()},t.stopBreath=function(t){s.stopAllByTarget(t),t.setScale(new c(1,1,1))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UIwin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localStorageData.ts","./UIManager.ts","./EventManager.ts","./audioManager.ts"],(function(e){var i,n,t,a,l,r,o,c,s,u,h,f,d,p,m;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,o=e.Node,c=e.Label,s=e.Component},function(e){u=e.localStorageData},function(e){h=e.UIManager,f=e.UIname},function(e){d=e.EventManager,p=e.EVENT_NAME},function(e){m=e.AudioManager}],execute:function(){var w,v,g,I,b,k,y,C,U,N,D,L,M;l._RF.push({},"e3073XoDcVDNrY7NAw17DAD","UIwin",void 0);var x=r.ccclass,P=r.property;e("UIwin",(w=x("UIwin"),v=P(o),g=P(c),I=P(c),b=P(o),k=P(o),w((U=i((C=function(e){function i(){for(var i,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return i=e.call.apply(e,[this].concat(l))||this,t(i,"home",U,a(i)),t(i,"level",N,a(i)),t(i,"reward",D,a(i)),t(i,"next",L,a(i)),t(i,"five",M,a(i)),i.rewardNum=0,i}n(i,e);var l=i.prototype;return l.onEnable=function(){this.onshow(),this.home.on("click",this.homeClick,this),this.next.on("click",this.nextClick,this),this.five.on("click",this.fiveClick,this)},l.homeClick=function(){u.addCoin(this.rewardNum),u.addLevel(),d.emit(p.clearLevel),h.Instance.closePanel(f.UIwin),h.Instance.openPanel(f.UImain)},l.nextClick=function(){u.addCoin(this.rewardNum),u.addLevel(),d.emit(p.clearLevel,"next"),h.Instance.closePanel(f.UIwin),h.Instance.openPanel(f.UIgame)},l.fiveClick=function(){u.addCoin(5*this.rewardNum),u.addLevel(),d.emit(p.clearLevel),h.Instance.closePanel(f.UIwin),h.Instance.openPanel(f.UImain)},l.onDisable=function(){this.home.off("click",this.homeClick,this),this.next.off("click",this.nextClick,this),this.five.off("click",this.fiveClick,this)},l.onshow=function(){console.log("本次奖励是",this.rewardNum),m.instance.playSound("win"),this.rewardNum=Math.floor(20*Math.random()+50),this.reward.string=this.rewardNum+"",this.level.string="第"+u.getLevel()+"关"},i}(s)).prototype,"home",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(C.prototype,"level",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(C.prototype,"reward",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=i(C.prototype,"next",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(C.prototype,"five",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=C))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/WalkOnRoad.ts",["cc","./EventManager.ts"],(function(n){var e,t,i,r,o,a,s,d;return{setters:[function(n){e=n.cclegacy,t=n._decorator,i=n.Vec3,r=n.Quat,o=n.geometry,a=n.PhysicsSystem},function(n){s=n.EventManager,d=n.EVENT_NAME}],execute:function(){e._RF.push({},"f4622cjJYxO0Zywi7i8zmrL","WalkOnRoad",void 0);t.ccclass,t.property;var c=n("WalkOnRoad",function(){function n(){}return n.onRoad=function(n,e,t){var i=e.worldPosition.clone(),r=o.Ray.create(i.x,i.y,i.z,0,-1,0);if(a.instance.raycast(r,4294967295,6))for(var c=a.instance.raycastResults,l=0;l<c.length;l++){var u=c[l],v=u.collider.node.name;if(v.includes("road_"))return n.setWorldPosition(u.hitPoint),v.includes("_end")?void s.emit(d.arriveEnd):(v.includes("_round")||(n.forward=u.collider.node.forward),void(v.includes("road_5")?this.turnRound(n,2,25,t):v.includes("road_6")?this.turnRound(n,2,15,t):v.includes("road_9")?this.turnRound(n,1,25,t):v.includes("road_10")&&this.turnRound(n,1,15,t)))}},n.stayMiddle=function(n,e,t){var r=e.worldPosition.clone(),s=t.worldPosition.clone(),d=i.subtract(this.vlr,s,r),c=i.subtract(this.vrl,r,s),l=o.Ray.create(r.x,r.y,r.z,d.x,d.y,d.z),u=o.Ray.create(s.x,s.y,s.z,c.x,c.y,c.z),v=a.instance.raycastClosest(l);if(v)var y=a.instance.raycastClosestResult.clone();var h=a.instance.raycastClosest(u);if(h)var f=a.instance.raycastClosestResult.clone();if(v&&h&&y.collider.node.name==f.collider.node.name){if(f.collider.node.name.includes("_round"))return;var R=y.hitPoint,m=f.hitPoint;i.distance(R,m)>9&&(i.subtract(this.middle,R,m),i.scaleAndAdd(this.middle,m,this.middle,.5),n.setWorldPosition(new i(this.middle.x,n.worldPosition.y,this.middle.z)))}},n.turnRound=function(e,t,i,o){var a=Math.PI*i/this.speed,s=(1==t?1:-1)*Math.PI/a*o/Math.PI*180;e.rotate(r.fromEuler(n.q,0,s,0))},n.walkForward=function(e,t){n.v3.z=-n.speed*t,e.translate(n.v3)},n}());c.speed=12,c.v3=new i(0,0,0),c.vlr=new i(0,0,0),c.vrl=new i(0,0,0),c.middle=new i(0,0,0),c.q=new r,e._RF.pop()}}}));

System.register("chunks:///_virtual/wall.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Object.ts"],(function(t){var e,n,c,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator},function(t){o=t.cObject}],execute:function(){var r;n._RF.push({},"63937OPGRNH6aZpAGp2y5x/","wall",void 0);var i=c.ccclass;c.property,t("wall",i("wall")(r=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onDisable=function(){this.remove(!0)},n}(o))||r);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});